using System;
using System.Collections.Generic;
using System.Linq;
using System.ServiceModel;
using System.Text;
using System.Threading.Tasks;
using WslAntiMalware.Communication;
using WslAntiMalware.Core;

namespace WslAntiMalware.Communication
{
    public class WslAntiMalwareServiceClient
    {
        public void f()
        {

            InstanceContext ctx = new InstanceContext(new Callback());
            WslAntiMalwareSystemServiceEndpointClient cc = new WslAntiMalwareSystemServiceEndpointClient(ctx);
            Task.Run(async () => await cc.OpenAsync()).Wait();
            Task.Run(async () => await cc.StopMonitoringAsync()).Wait();
        }
    }

    public class Callback : IWslAntiMalwareSystemServiceEndpointCallback
    {
        public void LogMessage(string str)
        {
            Logging.Instance.LogMessage($@"LogMessage from SystemService: {str}");
        }
    }

}
